(self.webpackChunkgraphiql_clientlibs=self.webpackChunkgraphiql_clientlibs||[]).push([[966],{37365:(e,t,n)=>{"use strict";var r=n(99489),a=r(n(82853)),i=r(n(82147)),u=r(n(38050)),l=r(n(3056)),o=r(n(71470)),s=r(n(78709)),c=r(n(91169)),d=n(74696),f=n(60681),p=n(65809);var h=function(e){(0,u.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,o.default)(t);if(n){var a=(0,o.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function d(){return(0,a.default)(this,d),r.apply(this,arguments)}return(0,i.default)(d,[{key:"init",value:function(){c.default.render(s.default.createElement(f.AppComponent,this.config),this.el)}}]),d}(d.ComponentBase);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".graphiql-root");e&&(0,p.create)(h,e)}))},98668:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.copyUrlToClipboard=void 0;var a=r(n(28129)),i=r(n(68357)),u=n(11958),l=n(59585),o=function(){var e=(0,i.default)(a.default.mark((function e(t,n){var r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s(n),i=c(t,r),!(navigator&&navigator.clipboard&&navigator.clipboard.writeText)){e.next=8;break}return e.next=5,navigator.clipboard.writeText(i);case 5:d("Query url copied to clipboard"),e.next=9;break;case 8:f("The Clipboard API is not available");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.copyUrlToClipboard=o;var s=function(e){var t="";return e&&(e=e.substring(0,e.indexOf("{")))&&(e=e.substring(e.indexOf("(")+1,e.indexOf(")")))&&e.split(",").forEach((function(e){e=e.substring(e.indexOf("$")+1,e.indexOf(":")),t+=";"+e+"="})),t},c=function(e,t){var n=window.location.origin;return n||(n=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),n+l.EXECUTE_URL+e+t},d=function(e){(0,u.success)(e,{timeout:l.DEFAULT_TOAST_TIMEOUT,variant:"positive"})},f=function(e){(0,u.error)(e,{timeout:l.DEFAULT_TOAST_TIMEOUT,variant:"negative"})}},39501:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteQueryDialog=void 0;var a=r(n(78709)),i=r(n(16526)),u=n(11958),l=n(31263),o=n(59585),s=function(e){var t=e.queryName,n=e.queryShortForm,r=e.onDelete,i=void 0===r?function(){}:r,u=(0,l.useDialogContainer)();return a.default.createElement(l.AlertDialog,{variant:"destructive",title:"Delete Query",primaryActionLabel:"Delete",secondaryActionLabel:"Cancel",onPrimaryAction:function(){var e=o.PERSIST_URL+n,r=new XMLHttpRequest;r.open("DELETE",e,!0),r.onload=function(){4==r.readyState&&"200"==r.status?(c("Deleted query: ".concat(t)),i()):d("Failed to delete: ".concat(t))},r.send(null),u.dismiss()},onSecondaryAction:function(){u.dismiss()}},a.default.createElement(l.View,null,a.default.createElement(l.Text,null,"Are you sure you want to delete the persisted query:"),a.default.createElement(l.Heading,{level:3},t)))};t.DeleteQueryDialog=s;var c=function(e){(0,u.success)(e,{timeout:o.DEFAULT_TOAST_TIMEOUT,variant:"positive"})},d=function(e){(0,u.error)(e,{timeout:o.DEFAULT_TOAST_TIMEOUT,variant:"negative"})};s.PropTypes={queryName:i.default.string,queryShortForm:i.default.string,onDelete:i.default.func}},74338:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueriesList=void 0;var a=r(n(78709)),i=r(n(16526)),u=n(31263);n(11112);var l=r(n(43025)),o=r(n(1508)),s=n(29885),c=function(e){var t=e.queryList,n=e.queryName,r=e.onQuerySelection,i=void 0===r?function(){}:r,c=e.onDelete,d=void 0===c?function(){}:c;return a.default.createElement(u.TableView,{"aria-label":"Table showing peristed queries",selectionMode:"single",selectionStyle:"highlight",width:"size-2400",height:"100vh",overflowMode:"truncate",selectedKeys:n?Array.of(n):[],onSelectionChange:function(e){i(t.filter((function(t){return t.queryName===e.currentKey}))[0])}},a.default.createElement(u.TableHeader,null,a.default.createElement(u.Column,{width:"16%",hideHeader:"true",align:"center"},"Publish Status"),a.default.createElement(u.Column,{width:"68%",hideHeader:"true"},"Query Name"),a.default.createElement(u.Column,{width:"16%",hideHeader:"true",align:"end"},"Menu")),a.default.createElement(u.TableBody,{items:t},(function(e){return a.default.createElement(u.Row,{key:e.queryName},a.default.createElement(u.Cell,null,"Activate"===e.lastReplicationAction&&a.default.createElement(l.default,{"aria-label":"Published",size:"S"}),"Deactivate"===e.lastReplicationAction&&a.default.createElement(o.default,{"aria-label":"Unpublished",size:"S"})),a.default.createElement(u.Cell,null,e.queryName),a.default.createElement(u.Cell,null,a.default.createElement(s.PersistedQueryMenu,{query:e,onDelete:d})))})))};t.PersistedQueriesList=c,c.propTypes={queryList:i.default.array,queryName:i.default.string,onQuerySelection:i.default.func,onDelete:i.default.func}},88689:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueriesPanel=void 0;var a=r(n(28129)),i=r(n(68357)),u=r(n(82853)),l=r(n(82147)),o=r(n(38050)),s=r(n(3056)),c=r(n(71470)),d=r(n(78709)),f=n(31263),p=r(n(97784)),h=r(n(93694)),y=r(n(18605)),m=r(n(16526)),v=n(74338),g=n(70374);n(61077);var b=function(e){(0,o.default)(E,e);var t,n,r,m,b=(r=E,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.default)(r);if(m){var n=(0,c.default)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.default)(this,e)});function E(e){var t;return(0,u.default)(this,E),(t=b.call(this,e)).state={configName:null,persistedQueries:null,onCreate:t.props.onCreate},t.element=d.default.createRef(),t}return(0,l.default)(E,[{key:"componentDidUpdate",value:(n=(0,i.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.reloadFlag==t.reloadFlag&&t.url===this.props.url){e.next=5;break}return e.next=3,new g.PersistedQueryUtil(this.props.url).fetchPersistedQueries();case 3:n=e.sent,this.setState(n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"componentDidMount",value:(t=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new g.PersistedQueryUtil(this.props.url).fetchPersistedQueries();case 2:t=e.sent,this.setState(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.configName,n=e.persistedQueries,r=d.default.createElement(f.IllustratedMessage,{id:"loading"},d.default.createElement(f.ProgressCircle,{"aria-label":"Loadingâ€¦",size:"M",isIndeterminate:!0,marginTop:"20px"}));return n?r=n.length>0?d.default.createElement("div",{className:"persisted-queries-list"},d.default.createElement(v.PersistedQueriesList,{queryList:n,queryName:this.props.queryName,onQuerySelection:this.props.onQuerySelection,onDelete:this.props.onDelete})):d.default.createElement(f.IllustratedMessage,{id:"no-saved-queries"},d.default.createElement(y.default,null),d.default.createElement(f.Heading,null,"No saved queries"),d.default.createElement(f.Content,null,"Try saving a new query")):t&&(r=d.default.createElement(f.IllustratedMessage,{id:"not-enabled"},d.default.createElement(h.default,null),d.default.createElement(f.Heading,null,"Not enabled"),d.default.createElement(f.Content,null,"Try enabling Persisted Queries for this configuration"))),d.default.createElement("div",{className:"persisted-queries-panel",id:"persisted-queries-panel","data-config-name":t,ref:this.element},d.default.createElement("div",{className:"persisted-queries-header"},d.default.createElement("div",null,d.default.createElement(f.Heading,{level:"4"},"Persisted Queries")),d.default.createElement(f.ActionButton,{"aria-label":"Create Query",isQuiet:!0,onPress:this.state.onCreate},d.default.createElement(p.default,null))),d.default.createElement(f.Flex,{direction:"column",width:"100%",gap:"size-100",alignItems:"center"},r))}}]),E}(d.default.Component);t.PersistedQueriesPanel=b,b.propTypes={url:m.default.string,queryName:m.default.string,reloadFlag:m.default.bool,onQuerySelection:m.default.func,onDelete:m.default.func,onCreate:m.default.func}},70374:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueryUtil=void 0;var a=r(n(28129)),i=r(n(68357)),u=r(n(82853)),l=r(n(82147)),o=n(59585);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(){function e(t){(0,u.default)(this,e),this.url=t}var t,n,r;return(0,l.default)(e,[{key:"fetchPersistedQueries",value:(r=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getConfigNameFromUrl(this.url),e.next=3,this.getPersistedQueries(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getConfigNameFromUrl",value:function(e){return e?e.split("cq:graphql/")[1].split("/endpoint.json")[0]:""}},{key:"getPersistedQueries",value:(n=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPersistedQueriesData(t);case 2:if(!(n=e.sent)){e.next=8;break}return r=this.getQueriesFromData(n),e.abrupt("return",{persistedQueries:r,configName:t});case 8:return e.abrupt("return",{persistedQueries:null,configName:t});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchPersistedQueriesData",value:(t=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o.GET_PERSISTED_QUERIES_URL+o.JCR_PATH_SEPARATOR+t);case 2:if((n=e.sent).ok){e.next=10;break}if(404!==n.status){e.next=8;break}return e.abrupt("return",null);case 8:throw r='An error has occured while fetching persisted queries for configuration "'.concat(t,'" : ').concat(n.status),new Error(r);case 10:return e.next=12,n.json();case 12:return i=e.sent,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getQueriesFromData",value:function(e){for(var t=[],n=0;n<e.length;n++){var r,a=s(e[n].queries);try{for(a.s();!(r=a.n()).done;){var i=r.value,u=i.path.shortForm,l={path:o.CONF_PATH_PREFIX+i.path.longForm,shortForm:u,queryName:u.substring(u.lastIndexOf("/")+1),query:i.data.query,lastReplicationAction:i.lastReplicationAction};t.push(l)}}catch(e){a.e(e)}finally{a.f()}}return t}}]),e}();t.PersistedQueryUtil=d},29885:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueryMenu=void 0;var a=r(n(61432)),i=r(n(78709)),u=r(n(16526)),l=n(31263),o=r(n(83813)),s=n(98668),c=n(39501),d=n(59585),f=function(e){var t=e.query,n=e.onDelete,r=void 0===n?function(){}:n,u=i.default.useState(),f=(0,a.default)(u,2),p=f[0],h=f[1],y=[{action:d.ACTION_COPY_URL,name:"Copy URL"},{action:d.ACTION_DELETE,name:"Delete"}];return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.MenuTrigger,{align:"end"},i.default.createElement(l.ActionButton,{isQuiet:!0,"aria-label":"More Options"},i.default.createElement(o.default,null)),i.default.createElement(l.Menu,{items:y,onAction:function(e){!function(e,t){e===d.ACTION_COPY_URL?(0,s.copyUrlToClipboard)(t.shortForm,t.query):e===d.ACTION_DELETE&&h(e)}(e,t)}},(function(e){return i.default.createElement(l.Item,{key:e.action,textValue:e.name},e.name)}))),i.default.createElement(l.DialogContainer,{onDismiss:function(){return h(void 0)}},p===d.ACTION_DELETE&&i.default.createElement(c.DeleteQueryDialog,{queryName:t.queryName,queryShortForm:t.shortForm,onDelete:r})))};t.PersistedQueryMenu=f,f.PropTypes={query:u.default.object,onDelete:u.default.func}},60681:(e,t,n)=>{"use strict";var r=n(99489),a=n(45559);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppComponent=void 0;var i=r(n(56156)),u=r(n(82853)),l=r(n(82147)),o=r(n(40734)),s=r(n(38050)),c=r(n(3056)),d=r(n(71470)),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(78709)),p=r(n(16526)),h=n(72056),y=n(88689),m=r(n(31191)),v=n(14037),g=n(31263),b=r(n(93694)),E=n(59585);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(e){(0,s.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(t);if(n){var a=(0,d.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function a(e){var t;return(0,u.default)(this,a),(t=r.call(this,e)).state={query:E.DEFAULT_QUERY,queryName:null,path:null,url:t.props.config.url,reloadFlag:!1},t.handleQuerySelection=t.handleQuerySelection.bind((0,o.default)(t)),t.handleSave=t.handleSave.bind((0,o.default)(t)),t.handleUrlChange=t.handleUrlChange.bind((0,o.default)(t)),t.handleDelete=t.handleDelete.bind((0,o.default)(t)),t.handleReset=t.handleReset.bind((0,o.default)(t)),t.handleReload=t.handleReload.bind((0,o.default)(t)),t}return(0,l.default)(a,[{key:"handleQuerySelection",value:function(e){this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},{key:"handleSave",value:function(e){this.setState((function(t){return{queryName:e}})),this.handleReload()}},{key:"handleDelete",value:function(){this.handleReload(),this.handleReset()}},{key:"handleReset",value:function(){this.setState((function(e){return{queryName:null,query:E.DEFAULT_QUERY,path:null}}))}},{key:"handleReload",value:function(){this.setState((function(e){return{reloadFlag:!e.reloadFlag}}))}},{key:"handleUrlChange",value:function(e){this.setState({url:e.detail}),this.handleReset()}},{key:"componentDidMount",value:function(){window.addEventListener("urlchange",this.handleUrlChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("urlchange",this.handleUrlChange)}},{key:"render",value:function(){var e=this.props.config.isPersistedQueriesUIEnabled,t=Object.keys(this.props.config.endpoints).length>0,n=window.Granite.HTTP.externalize("/libs/cq/graphql/sites/admin/content/console.html");return f.default.createElement(m.default,{toastPlacement:"bottom center"},f.default.createElement(v.Provider,{theme:g.lightTheme,colorScheme:"light"},f.default.createElement("div",{className:"graphiql__app"},e&&t&&f.default.createElement(y.PersistedQueriesPanel,{url:this.state.url,queryName:this.state.queryName,reloadFlag:this.state.reloadFlag,onQuerySelection:this.handleQuerySelection,onDelete:this.handleDelete,onCreate:this.handleReset}),t&&f.default.createElement(h.GraphiQLComponent,{url:this.state.url,path:this.state.path,onSave:this.handleSave,onPublish:this.handleReload,queryName:this.state.queryName,query:this.state.query,isPersistedQueriesUIEnabled:e}),!t&&f.default.createElement(g.Flex,{direction:"column",width:"100%",gap:"size-100",alignItems:"center"},f.default.createElement(g.IllustratedMessage,{id:"no-endpoints"},f.default.createElement(b.default,null),f.default.createElement(g.Heading,null,"No endpoints defined"),f.default.createElement(g.Content,null,"Try to add an endpoint first ",f.default.createElement("a",{href:n},"here"),"."))))))}}]),a}(f.Component);t.AppComponent=O,O.propTypes={url:p.default.string};var q=O;t.default=q},72056:(e,t,n)=>{"use strict";var r=n(99489),a=n(45559);Object.defineProperty(t,"__esModule",{value:!0}),t.GraphiQLComponent=void 0;var i=r(n(28129)),u=r(n(68357)),l=r(n(82853)),o=r(n(82147)),s=r(n(40734)),c=r(n(38050)),d=r(n(3056)),f=r(n(71470)),p=r(n(56156)),h=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(78709)),y=r(n(16526)),m=r(n(93539)),v=r(n(99549)),g=r(n(67466)),b=r(n(25253)),E=r(n(15223)),_=r(n(47857)),P=n(31263);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var q=function(e){(0,c.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(t);if(n){var a=(0,f.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,d.default)(this,e)});function a(e){var t;return(0,l.default)(this,a),t=r.call(this,e),(0,p.default)((0,s.default)(t),"handleEditQuery",(function(e){t.setState({query:e})})),t.state={query:null},t.cachingGraphQLClient=new _.default(t.props.url),t}return(0,o.default)(a,[{key:"componentDidUpdate",value:function(e){this.props.query!==e.query&&this.setState({query:this.props.query})}},{key:"render",value:function(){var e=this;m.default.Logo=function(){return h.default.createElement("span",null)};var t=this.props.isPersistedQueriesUIEnabled;return h.default.createElement("div",{className:"gq-container"},h.default.createElement(m.default,{ref:function(t){return e._graphiql=t},onEditQuery:t?this.handleEditQuery:void 0,query:t?this.props.query:void 0,style:{height:"100vh"},defaultVariableEditorOpen:!0,fetcher:function(){var t=(0,u.default)(i.default.mark((function t(n){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.cachingGraphQLClient.query(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h.default.createElement(m.default.Toolbar,null,h.default.createElement("div",{style:{background:"linear-gradient(#f7f7f7,#e2e2e2)"}},h.default.createElement(P.ActionButton,{isQuiet:!0,onPress:function(){return e._graphiql.handlePrettifyQuery()},staticColor:"black","aria-label":"Prettify"},h.default.createElement(b.default,null),h.default.createElement(P.Text,null,"Prettify")),h.default.createElement(P.ActionButton,{isQuiet:!0,onPress:function(){return e._graphiql.handleToggleHistory()},staticColor:"black","aria-label":"History"},h.default.createElement(g.default,null),h.default.createElement(P.Text,null,"History")),t&&this.state.query&&h.default.createElement(v.default,{endpointURL:this.props.url,query:this.state.query,queryName:this.props.queryName,onSave:this.props.onSave}),t&&this.props.path&&h.default.createElement(E.default,{path:this.props.path,onPublish:this.props.onPublish})))))}}]),a}(h.Component);t.GraphiQLComponent=q,q.propTypes={url:y.default.string,path:y.default.string,query:y.default.string,queryName:y.default.string,onSave:y.default.func,onPublish:y.default.func}},15223:(e,t,n)=>{"use strict";var r=n(99489),a=n(45559);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PublishComponent=void 0;var i=r(n(82853)),u=r(n(82147)),l=r(n(40734)),o=r(n(38050)),s=r(n(3056)),c=r(n(71470)),d=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(78709)),f=r(n(16526)),p=n(31263),h=r(n(43025)),y=r(n(1508)),m=n(11958),v=n(59585);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}var b=function(e){(0,o.default)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function a(e){var t;return(0,i.default)(this,a),(t=r.call(this,e)).state={},t.publishQuery=t.publishQuery.bind((0,l.default)(t)),t.unpublishQuery=t.unpublishQuery.bind((0,l.default)(t)),t}return(0,u.default)(a,[{key:"publishQuery",value:function(){this.requestReplication("activate")}},{key:"unpublishQuery",value:function(){this.requestReplication("deactivate")}},{key:"requestReplication",value:function(e){var t=new FormData;t.append("_charset_","utf-8"),t.append("path",this.props.path),t.append("cmd",e);var n=new XMLHttpRequest;n.open("POST",v.PUBLISH_URL);var r="activate"===e?"publish":"unpublish",a=this.props.onPublish;n.onload=function(){200===n.status||201===n.status?(a(),(0,m.success)("Selected query scheduled for "+r+"ing.",{timeout:5e3})):(0,m.error)("Could not "+r+" selected query",{timeout:5e3})},n.send(t),"deactivate"===e&&this.state.close()}},{key:"render",value:function(){var e=this;return d.default.createElement(d.default.Fragment,null,d.default.createElement(p.ActionButton,{isQuiet:!0,onPress:this.publishQuery,staticColor:"black"},d.default.createElement(h.default,null),d.default.createElement(p.Text,null,"Publish")),d.default.createElement(p.DialogTrigger,null,d.default.createElement(p.ActionButton,{isQuiet:!0,staticColor:"black"},d.default.createElement(y.default,null),d.default.createElement(p.Text,null,"Unpublish")),(function(t){return e.state.close=t,d.default.createElement(p.Dialog,null,d.default.createElement(p.Heading,null,"Unpublish persisted query"),d.default.createElement(p.Divider,null),d.default.createElement(p.Content,null,d.default.createElement(p.Text,null,"Unpublishing might break client applications that rely on the persisted query being present on publish. Do you really want to unpublish the selected persisted query?")),d.default.createElement(p.ButtonGroup,null,d.default.createElement(p.Button,{variant:"secondary",onPress:t},"No"),d.default.createElement(p.Button,{variant:"cta",onPress:e.unpublishQuery},"Yes")))})))}}]),a}(d.Component);t.PublishComponent=b,b.propTypes={path:f.default.string,onPublish:f.default.func};var E=b;t.default=E},99549:(e,t,n)=>{"use strict";var r=n(99489),a=n(45559);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SaveComponent=void 0;var i=r(n(28129)),u=r(n(68357)),l=r(n(82853)),o=r(n(82147)),s=r(n(40734)),c=r(n(38050)),d=r(n(3056)),f=r(n(71470)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}(n(78709)),h=r(n(16526)),y=n(31263),m=r(n(74273)),v=n(11958),g=n(59585),b=n(70374);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}var _=function(e){(0,c.default)(E,e);var t,n,r,a,h=(r=E,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,f.default)(r);if(a){var n=(0,f.default)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,d.default)(this,e)});function E(e){var t;(0,l.default)(this,E);var n=(t=h.call(this,e)).props.queryName?t.props.queryName:"",r=!t.props.queryName;return t.state={queryName:n,isNewQuery:r,inputQueryName:"",persistedEnabled:!1},t.handleClick=t.handleClick.bind((0,s.default)(t)),t.handleFormSubmit=t.handleFormSubmit.bind((0,s.default)(t)),t.handleTextField=t.handleTextField.bind((0,s.default)(t)),t.createOrUpdatePersistedQuery=t.createOrUpdatePersistedQuery.bind((0,s.default)(t)),t}return(0,o.default)(E,[{key:"componentDidMount",value:(n=(0,u.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPersistedEnabled();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"initPersistedEnabled",value:(t=(0,u.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new b.PersistedQueryUtil(this.props.endpointURL).fetchPersistedQueries();case 2:t=e.sent,this.setState({persistedEnabled:null!=t.persistedQueries});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"createOrUpdatePersistedQuery",value:function(){var e,t,n;this.state.isNewQuery?(e="PUT",t=this.state.inputQueryName,n="Successfully created a persisted query"):(e="POST",t=this.state.queryName,n="Successfully updated the persisted query");var r=this.props.endpointURL.split("/")[3],a=g.PERSIST_URL+"/"+r+"/"+t,i=JSON.stringify({query:JSON.parse(JSON.stringify(this.props.query))}),u=new XMLHttpRequest;u.open(e,a),u.setRequestHeader("Content-Type","application/json");var l=this.props.onSave;u.onload=function(){var e;200===u.status||201===u.status?((0,v.success)(n,{timeout:5e3}),l(t)):(0,v.error)((e=JSON.stringify(JSON.parse(u.responseText).errors[0].details)).includes("type=ValidationError; ")?e.split("type=ValidationError; message=")[1].split("@")[0]:e,{timeout:5e3})},u.send(i),this.setState({inputQueryName:""})}},{key:"handleTextField",value:function(e){this.setState({inputQueryName:e})}},{key:"handleFormSubmit",value:function(e){this.createOrUpdatePersistedQuery(),this.state.close(),e.preventDefault()}},{key:"handleClick",value:function(){this.createOrUpdatePersistedQuery(),this.state.isNewQuery&&this.state.close()}},{key:"componentDidUpdate",value:function(e){if(this.props.queryName!==e.queryName){var t=this.props.queryName?this.props.queryName:"",n=!this.props.queryName;this.setState({queryName:t,isNewQuery:n})}}},{key:"render",value:function(){var e=this;return this.state.persistedEnabled?this.state.isNewQuery?p.default.createElement(y.DialogTrigger,{type:"popover"},p.default.createElement(y.ActionButton,{isQuiet:!0,isDisabled:!this.props.query,staticColor:"black"},p.default.createElement(m.default,null),p.default.createElement(y.Text,null,"Save As")),(function(t){return e.state.close=t,p.default.createElement(y.Dialog,null,p.default.createElement(y.Content,null,p.default.createElement(y.Form,{onSubmit:e.handleFormSubmit},p.default.createElement(y.TextField,{label:"Query Name",placeholder:"Type your query name",value:e.state.inputQueryName,onChange:e.handleTextField}))),p.default.createElement(y.ButtonGroup,null,p.default.createElement(y.Button,{variant:"cta",onPress:e.handleClick},"save")))})):p.default.createElement(y.ActionButton,{isQuiet:!0,isDisabled:!this.props.query,onPress:this.handleClick,staticColor:"black"},p.default.createElement(m.default,null),p.default.createElement(y.Text,null,"Save")):null}}]),E}(p.Component);t.SaveComponent=_,_.propTypes={endpointURL:h.default.string,query:h.default.string,queryName:h.default.string,onSave:h.default.func};var P=_;t.default=P},47857:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(82853)),i=r(n(82147)),u=function(){function e(t){(0,a.default)(this,e),this.url=t}return(0,i.default)(e,[{key:"query",value:function(e){var t,n="IntrospectionQuery"!==e.operationName;return n||!this.cachedData||Date.now()-this.cachedDataTime>1e4?(t=this._executeQuery(e),n||(console.log("setting cache"),this.cachedData=t,this.cachedDataTime=Date.now())):t=this.cachedData,t}},{key:"_executeQuery",value:function(e){var t,n=new window.XMLHttpRequest;return n.open("POST",this.url,!1),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){t=JSON.parse(n.response)},n.send(JSON.stringify(e)),t}}]),e}();t.default=u},74696:(e,t,n)=>{"use strict";var r=n(99489);Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentBase=void 0;var a=r(n(82853)),i=r(n(82147)),u=function(){function e(t,n){(0,a.default)(this,e),this.el=t,this.config=n||{},this.init()}return(0,i.default)(e,[{key:"init",value:function(){throw new Error("Missing 'init()' function for class of type BaseComponent")}}]),e}();t.ComponentBase=u},65809:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0,t.create=function(e,t){var n=t.getAttribute("data-params"),r={};try{r=JSON.parse(n)}catch(e){return console.error("ERROR parsing data-attr"),e}try{return new e(t,r)}catch(e){return console.error("ERROR:",t,r,e),e}}},59585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHELL_PATH_PREFIX=t.PUBLISH_URL=t.PERSIST_URL=t.JCR_PATH_SEPARATOR=t.GET_PERSISTED_QUERIES_URL=t.EXECUTE_URL=t.DIALOG_PATH_SUFFIX=t.DIALOG_PATH_PREFIX=t.DEFAULT_TOAST_TIMEOUT=t.DEFAULT_QUERY=t.CONF_PATH_PREFIX=t.APPS_PATH_PREFIX=t.ACTION_DELETE=t.ACTION_COPY_URL=void 0,t.GET_PERSISTED_QUERIES_URL="/graphql/list.json",t.EXECUTE_URL="/graphql/execute.json",t.PERSIST_URL="/graphql/persist.json",t.JCR_PATH_SEPARATOR="/",t.DIALOG_PATH_PREFIX="/mnt/override/apps/",t.DIALOG_PATH_SUFFIX="/_cq_dialog.html",t.SHELL_PATH_PREFIX="mnt/overlay",t.APPS_PATH_PREFIX="apps",t.CONF_PATH_PREFIX="/conf",t.DEFAULT_TOAST_TIMEOUT=5e3,t.ACTION_COPY_URL="copy-url",t.ACTION_DELETE="delete",t.PUBLISH_URL="/bin/replicate.json",t.DEFAULT_QUERY='# Welcome to GraphiQL\n#\n# GraphiQL is an in-browser tool for writing, validating, and\n# testing GraphQL queries.\n#\n# Type queries into this side of the screen, and you will see intelligent\n# typeaheads aware of the current GraphQL type schema and live syntax and\n# validation errors highlighted within the text.\n#\n# GraphQL queries typically start with a "{" character. Lines that start\n# with a # are ignored.\n#\n# An example GraphQL query might look like:\n#\n#     {\n#       field(arg: "value") {\n#         subField\n#       }\n#     }\n#\n# Keyboard shortcuts:\n#\n#  Prettify Query:  Shift-Ctrl-P (or press the prettify button above)\n#\n#       Run Query:  Ctrl-Enter (or press the play button above)\n#\n#   Auto Complete:  Ctrl-Space (or just start typing)\n#\n\n'},9510:(e,t,n)=>{(e.exports=n(68922)(!1)).push([e.id,"/*************************************************************************\n * ADOBE CONFIDENTIAL\n * ___________________\n *\n * Copyright 2022 Adobe\n * All Rights Reserved.\n *\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n **************************************************************************/\n\n.persisted-queries-list > div > div:first-child {\n  display: none;\n}\n",""])},90005:(e,t,n)=>{(e.exports=n(68922)(!1)).push([e.id,"/*************************************************************************\n * ADOBE CONFIDENTIAL\n * ___________________\n *\n * Copyright 2022 Adobe\n * All Rights Reserved.\n *\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n **************************************************************************/\n\n.aem-graphiql__container\n  .graphiql-root\n  .graphiql__app\n  .persisted-queries-panel {\n  width: 200px;\n  border-right: 2px solid #e1e1e1;\n}\n\n.aem-graphiql__container\n  .graphiql-root\n  .graphiql__app\n  .persisted-queries-panel\n  .persisted-queries-list {\n  display: flex;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  min-height: 0;\n  min-width: 0;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.aem-graphiql__container\n  .graphiql-root\n  .graphiql__app\n  .persisted-queries-panel\n  .persisted-queries-header {\n  border-bottom: 1px solid #e1e1e1;\n  float: left;\n  width: 90%;\n  height: 34px;\n  padding: 7px 12px 6px;\n  cursor: default;\n}\n.persisted-queries-header > div {\n  float: left;\n}\n.persisted-queries-header > div > h4 {\n  margin-top: 5px;\n}\n.persisted-queries-header > button {\n  float: right;\n}\n#no-saved-queries {\n  padding: 20px;\n}\n",""])},11112:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(93379),a=n.n(r),i=n(9510),u=n.n(i);a()(u(),{insert:"head",singleton:!1});const l=u().locals||{}},61077:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(93379),a=n.n(r),i=n(90005),u=n.n(i);a()(u(),{insert:"head",singleton:!1});const l=u().locals||{}}},e=>{e.O(0,[687],(()=>(37365,e(e.s=37365)))),e.O()}]);
//# sourceMappingURL=app.bundle.js.map